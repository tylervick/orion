(function(s,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(s=typeof globalThis<"u"?globalThis:s||self,s.Browser=d())})(this,function(){"use strict";const s=t=>typeof t.url=="string"&&typeof t.title=="string"&&(typeof t.favicon=="string"||t.favicon===void 0),l={topSites:{get:async t=>{const e={method:"topSites",payload:t};return window.webkit.messageHandlers.extension.postMessage(e).then(n=>{if(Array.isArray(n)&&n.every(s))return n;throw new Error("Invalid response")})}}},u=()=>{window.browser=l,console.debug("Orion Browser API loaded.")},c=t=>{var i,r;const e=t.querySelector(".InstallButtonWrapper");if(!e){console.debug("InstallButtonWrapper not found");return}if((i=e.textContent)!=null&&i.includes("Add to Orion")){console.debug('InstallButtonWrapper already contains "Add to Orion"');return}const n=(r=e.querySelector("a.InstallButtonWrapper-download-link"))==null?void 0:r.getAttribute("href");if(!n){console.debug("href not found");return}const a=document.createElement("div");a.className="AMInstallButton AMInstallButton--noDownloadLink";const o=document.createElement("a");o.className="Button Button--action AMInstallButton-button Button--puffy",o.href=n,o.textContent="Add to Orion",a.appendChild(o),e.replaceChildren(a)},f={observeInstallButtonWrapper:()=>{window.addEventListener("DOMContentLoaded",()=>{const t=new MutationObserver((n,a)=>{for(const o of n)if(o.type==="childList"){const i=Array.from(o.addedNodes);for(const r of i)r instanceof Element&&r.querySelector(".InstallButtonWrapper")&&c(r)}}),e=document.querySelector("body");e&&t.observe(e,{childList:!0,subtree:!0})})}};return(()=>{f.observeInstallButtonWrapper(),console.debug("Orion Tab API loaded.")})(),u(),l});
